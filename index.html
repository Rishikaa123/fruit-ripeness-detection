<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Fruit Ripeness Detection</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      /* üëá Point this to your background image (local file or URL) */
      --bg-image: url("assets/fruit-basket.jpg"); /* e.g., "fruit-basket.jpg" or a full https URL */
      --card-bg: rgba(255,255,255,0.85);
      --text: #111;
      --muted: #555;

      /* Button colors */
      --primary: #ff7a18;   /* orange */
      --primary-dark:#e06710;
      --secondary:#1e90ff;  /* blue */
      --secondary-dark:#1673cc;
    }

    * { box-sizing: border-box; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
      color: var(--text);
      min-height: 100dvh;
      background: var(--bg-image) center/cover fixed no-repeat;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 32px;
    }

    /* subtle vignette so text is readable on busy backgrounds */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      background:
        radial-gradient(70% 60% at 50% 30%, rgba(0,0,0,0.15), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,0.2), rgba(0,0,0,0.25));
      pointer-events:none;
      z-index:0;
    }

    .card{
      position:relative;
      z-index:1;
      width:min(1100px, 95vw);
      background: var(--card-bg);
      backdrop-filter: blur(6px);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.25);
      padding: 28px 28px 36px;
    }

    .title{
      text-align:center;
      font-size: clamp(22px, 3.4vw, 36px);
      margin: 6px 0 18px;
      letter-spacing: 0.5px;
    }

    .toolbar{
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 18px;
    }

    /* Hide the default file input */
    #fileInput{ display:none; }

    .btn{
      appearance:none;
      border:none;
      padding: 10px 16px;
      border-radius: 12px;
      font-weight: 700;
      cursor: pointer;
      transition: transform .06s ease, box-shadow .2s ease, background .2s ease;
      box-shadow: 0 6px 16px rgba(0,0,0,0.15);
      user-select:none;
      outline-offset: 2px;
    }
    .btn:active{ transform: translateY(1px); }

    .btn.secondary{
      background: var(--secondary);
      color: #fff;
    }
    .btn.secondary:hover{ background: var(--secondary-dark); }

    .btn.primary{
      background: linear-gradient(135deg, var(--primary), #ffb703);
      color:#1b1200;
    }
    .btn.primary:hover{
      background: linear-gradient(135deg, var(--primary-dark), #ffa502);
    }
    .btn[disabled]{
      opacity:.6;
      cursor:not-allowed;
      box-shadow:none;
    }

    .preview-wrap{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 22px;
      align-items:start;
      margin-top: 10px;
    }
    @media (max-width: 900px){
      .preview-wrap{ grid-template-columns: 1fr; }
    }

    .image-box{
      background:#fff;
      border-radius: 16px;
      padding: 10px;
      border: 2px solid #e8e8e8;
      min-height: 260px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    #preview{
      max-width:100%;
      height:auto;
      border-radius: 12px;
    }

    .result{
      display:flex;
      align-items:center;
      justify-content:center;
      min-height: 120px;
      background:#fff;
      border-radius:16px;
      border: 2px solid #e8e8e8;
      padding: 18px;
      text-align:center;
    }
    #resultText{
      font-size: clamp(16px, 2.2vw, 24px);
      font-weight: 800;
    }
    .hint{
      text-align:center;
      color: var(--muted);
      margin-top: 8px;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <main class="card">
    <h1 class="title">üçéüçåüçä <strong>Fruit Ripeness Detection</strong></h1>

    <div class="toolbar">
      <!-- Custom file button -->
      <input type="file" id="fileInput" accept="image/*" />
      <label for="fileInput" class="btn secondary">Choose File</label>

      <button id="predictBtn" class="btn primary">Predict</button>
    </div>
    <p class="hint">Tip: choose a clear photo of apples, bananas, or oranges.</p>

    <section class="preview-wrap">
      <div class="image-box">
        <img id="preview" alt="Preview will appear here" />
      </div>

      <div class="result">
        <div id="resultText">Prediction will appear here</div>
      </div>
    </section>
  </main>

  <script>
    const fileInput  = document.getElementById("fileInput");
    const predictBtn = document.getElementById("predictBtn");
    const previewImg = document.getElementById("preview");
    const resultText = document.getElementById("resultText");

    let selectedFile = null;

    fileInput.addEventListener("change", () => {
      if (!fileInput.files.length) return;
      selectedFile = fileInput.files[0];
      previewImg.src = URL.createObjectURL(selectedFile);
      previewImg.onload = () => URL.revokeObjectURL(previewImg.src);
      resultText.textContent = "Ready to predict‚Ä¶";
    });

    predictBtn.addEventListener("click", async () => {
      if (!selectedFile) {
        alert("Please choose an image first.");
        return;
      }
      predictBtn.disabled = true;
      resultText.textContent = "Predicting‚Ä¶";

      const formData = new FormData();
      formData.append("file", selectedFile);

      try {
        const res = await fetch("http://127.0.0.1:8000/predict/", {
          method: "POST",
          body: formData
        });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();
        resultText.textContent =
          `Prediction: ${data.class.replace('_',' ')} (Confidence: ${(data.confidence*100).toFixed(2)}%)`;
      } catch (e) {
        console.error(e);
        resultText.textContent = "Error: Could not connect to backend.";
      } finally {
        predictBtn.disabled = false;
      }
    });
  </script>
</body>
</html>
